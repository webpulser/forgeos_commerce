!!! xml utf-8
!!! 1.1
%html{ 'xml:lang' => I18n.locale, :xmlns => 'http://www.w3.org/1999/xhtml' }
  %head
    %title= yield(:title) || "#{Setting.first.name} #{t('page_not_found')}"
    %meta{ :content => 'text/html; charset=utf-8', 'http-equiv' => 'Content-Type' }
    %meta{ :name => 'Description', :content => yield(:description) || '' }
    %meta{ :name => 'keywords', :content => yield(:keywords) || '' }
    %meta{ :name => 'generator', :content => 'Forgeos Commerce 0.9.0-rc2' }
    %link{ :href => '/images/front_demo/favicon.gif', :rel => 'shortcut icon', :type => 'image/gif' }
    = stylesheet_link_tag %w(front_demo/style front_demo/jqzoom front_demo/jquery.jcarousel front_demo/jquery-ui/themes/front), :cache => 'base'
    = javascript_include_tag 'jquery'
  %body
    .header
      .header-content
        %ul.list_static_pages
          -Page.find_all_by_active(true,:conditions => {:single_key => nil, :active => true}, :limit => 4).each do |page|
            %li= link_to page.title, "/#{page.url}"
        .baseline
        .cart
          .newsletter
            -if logged_in?
              = link_to t(:disconnect).capitalize, person_session_path, :method => :delete
            -else
              -#session[:redirect] = '/'
              = link_to t('log.in.action').capitalize, '#', :id=>'login_link'
              #login_container
                = render :partial => 'person_sessions/new_form'
          .search_box
            %label= t('front.research').capitalize
            .search_form
              .search-icon
              - form_tag(:controller => 'search') do
                = text_field_tag 'keywords', '', :class => 'input_text'
                = submit_tag t('front.search').capitalize, :class => 'btn_ok'
          -if !current_cart.nil?
            .cart-box
              = link_to t('my_account_login').capitalize, login_path if !logged_in?
              .cart-icon
                %span= link_to_cart(t('my_cart').capitalize)
                %br
                = "#{current_cart.total_items} article(s)" if !current_cart.nil?
                - if current_cart.products.length > 0
                  %span.opener
              - if current_cart.products.length > 0
                %ul.cart-products
                  -current_cart.products.group_by(&:id).each do |cart_product|
                    -product = cart_product[1].first
                    -nb = cart_product[1].size
                    %li
                      %span.li-product-name= truncate(product.name, 20, '...')
                      %span.li-product-qty= "x#{nb}"
                      %span.li-product-price
                        = number_with_precision(product.price*nb,2)
                        = current_currency.html
                      %span.clear
                  %li.last
                    %span.li-product-name= t(:total)
                    %span.li-product-qty
                      = number_with_precision(current_cart.total,2)
                      = current_currency.html
          .create-customer-space
            -if logged_in?
              = link_to "#{t(:welcome)} #{current_user.fullname}", "#"
            - else
              = link_to t(:sign_up), new_user_path
        - product_categories = ProductCategory.find_all_by_parent_id(nil, :limit => 7)
        = display_menu_front(@menu, {:ul_class => "menu", :li_class => "test_class_li", :li_current_class => "test_class_li_currrent"})
        - unless product_categories.empty?
          /%ul.menu
          /- product_categories.each do |category|
          /%li= link_to category.name, catalog_path(:category_name=> category.name, :url => nil)
    .content
      .before_breadcrumbs
      .breadcrumbs
        .inner-breadcrumbs
          = link_to t(:home), :root
          &gt;
          = yield :breadcrumbs
      = yield
      .clear
    .footer
      .footer_categories_links
        - ProductCategory.all.each do |category|
          = link_to category.name, catalog_path(:category_name=> category.name, :url => nil)
      .footer_links
        %span= t('payment.safe')
        = image_tag('front_demo/master_card.png') 
        = image_tag('front_demo/credit_card.png') 
        = image_tag('front_demo/visa.png') 
        = image_tag('front_demo/https.png') 
        -Page.find_all_by_active(true, :conditions => {:single_key => nil, :active => true}).each do |page|
          =link_to page.title, {:controller => 'url_catcher', :action => 'page', :url => page.url}
          |

    = render :partial => '/layouts/analytics' if Rails.env == 'production'
    = javascript_include_tag 'front_demo/jquery.jcarousel.pack', :cache => false
    = javascript_include_tag %w(front_demo/jquery-ui front_demo/customselects front_demo/jquery.jqzoom1.0.1 front_demo/init), :cache => 'base'
