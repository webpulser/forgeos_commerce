- unless defined?(level)
  - level = 0

- categories.each do |category|
  %li{:id => "#{category.id}" }
    - picture = category.attachments.find_all_by_type('Picture').first
    - link_to '#', :style => (picture ? "background-image : url('#{picture.public_filename(:icon)}');" : ''), :class => 'big-icons folder' do
      = category.name
      -# if category.children.empty?
      %span
    - unless category.children.empty?
      %ul
        - category.children.each do |child|
          = render :partial => 'admin/categories/list_products', :locals => { :categories => [child], :level => (level + 1) }
